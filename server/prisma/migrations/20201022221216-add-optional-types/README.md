# Migration `20201022221216-add-optional-types`

This migration has been generated by Ayush Goyal at 10/22/2020, 6:12:16 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Approval" ALTER COLUMN "notes" DROP NOT NULL

ALTER TABLE "public"."File" ALTER COLUMN "isActive" SET DEFAULT true

ALTER TABLE "public"."PaymentMethod" ALTER COLUMN "isActive" SET DEFAULT true,
ALTER COLUMN "isDirectPayment" SET DEFAULT false

ALTER TABLE "public"."Project" ALTER COLUMN "archived" SET DEFAULT false

ALTER TABLE "public"."Requisition" ALTER COLUMN "description" DROP NOT NULL,
ALTER COLUMN "shippingLocation" DROP NOT NULL,
ALTER COLUMN "isReimbursement" SET DEFAULT false,
ALTER COLUMN "status" SET DEFAULT E'DRAFT'

ALTER TABLE "public"."RequisitionItem" ALTER COLUMN "name" DROP NOT NULL,
ALTER COLUMN "link" DROP NOT NULL,
ALTER COLUMN "notes" DROP NOT NULL,
ALTER COLUMN "received" SET DEFAULT false

ALTER TABLE "public"."Vendor" ALTER COLUMN "isActive" SET DEFAULT true
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201022220459-add-enums..20201022221216-add-optional-types
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 enum AccessLevel {
   NONE
@@ -86,9 +86,9 @@
 model Approval {
   id            Int         @id @default(autoincrement())
   isApproving   Boolean
-  notes         String
+  notes         String?
   date          String
   approverId    Int
   requisitionId Int
   approver      User        @relation(fields: [approverId], references: [id])
@@ -98,9 +98,9 @@
 model File {
   id            Int         @id @default(autoincrement())
   name          String
   googleName    String      @unique
-  isActive      Boolean
+  isActive      Boolean     @default(true)
   requisitionId Int
   type          String
   requisition   Requisition @relation(fields: [requisitionId], references: [id])
 }
@@ -119,19 +119,19 @@
 model PaymentMethod {
   id                        Int           @id @default(autoincrement())
   name                      String        @unique
-  isActive                  Boolean
+  isActive                  Boolean       @default(true)
   reimbursementInstructions String
-  isDirectPayment           Boolean
+  isDirectPayment           Boolean       @default(false)
   payment                   Payment[]
   expenses_requisition      Requisition[]
 }
 model Project {
   id           Int           @id @default(autoincrement())
   name         String
-  archived     Boolean
+  archived     Boolean       @default(false)
   shortCode    String
   year         Int
   projectLeads User[]
   requisition  Requisition[]
@@ -139,19 +139,19 @@
 model Requisition {
   id                   Int               @id @default(autoincrement())
   headline             String
-  description          String
-  status               RequisitionStatus
+  description          String?
+  status               RequisitionStatus @default(DRAFT)
   projectId            Int
   vendorId             Int?
   projectRequisitionId Int
   createdById          Int
   paymentRequiredBy    String?
   otherFees            Float?
   orderDate            String?
-  shippingLocation     String
-  isReimbursement      Boolean
+  shippingLocation     String?
+  isReimbursement      Boolean           @default(false)
   fundingSourceId      Int?
   budgetId             Int?
   purchaseDate         String?
   budget               Budget?           @relation(fields: [budgetId], references: [id])
@@ -166,24 +166,24 @@
 }
 model RequisitionItem {
   id            Int         @id @default(autoincrement())
-  name          String
+  name          String?
   quantity      Int?
   unitPrice     Float?
   requisitionId Int
-  link          String
-  notes         String
-  received      Boolean
+  link          String?
+  notes         String?
+  received      Boolean     @default(false)
   lineItemId    Int?
   lineItem      LineItem?   @relation(fields: [lineItemId], references: [id])
   requisition   Requisition @relation(fields: [requisitionId], references: [id])
 }
 model Vendor {
   id           Int           @id @default(autoincrement())
   name         String        @unique
-  isActive     Boolean
+  isActive     Boolean       @default(true)
   payments     Payment[]
   requisitions Requisition[]
 }
```


